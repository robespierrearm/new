# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ñ–∞–π–ª—ã –±–µ–∑ –∏—Ö —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ.

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤

### üìÑ PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã
- **–§–æ—Ä–º–∞—Ç**: `.pdf`
- **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —á–µ—Ä–µ–∑ `<iframe>`
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –î–æ 20 –ú–ë

### üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–§–æ—Ä–º–∞—Ç—ã**: `.jpg`, `.jpeg`, `.png`, `.gif`, `.webp`, `.svg`
- **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `<img>` —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π –ø–æ–¥ —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –î–æ 20 –ú–ë

### üìù –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- **–§–æ—Ä–º–∞—Ç—ã**: `.txt`, `.json`, `.csv`, `.md`
- **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä**: –ö—Ä–∞—Å–∏–≤–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ –æ–∫–Ω–µ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –î–æ 20 –ú–ë

### üìä Office –¥–æ–∫—É–º–µ–Ω—Ç—ã
- **–§–æ—Ä–º–∞—Ç—ã**: `.doc`, `.docx`, `.xls`, `.xlsx`, `.ppt`, `.pptx`
- **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä**: –ß–µ—Ä–µ–∑ Google Docs Viewer
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –î–æ 20 –ú–ë
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª—É

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞

1. **–í–æ –≤–∫–ª–∞–¥–∫–µ "–§–∞–π–ª—ã"**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É üëÅÔ∏è (–≥–ª–∞–∑) —Ä—è–¥–æ–º —Å —Ñ–∞–π–ª–æ–º
   - –û—Ç–∫—Ä–æ–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º

2. **–í –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–µ–Ω–¥–µ—Ä–∞**
   - –í —Ä–∞–∑–¥–µ–ª–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –ö–ª–∏–∫ –ø–æ —Ñ–∞–π–ª—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä

3. **–í –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–∏**
   - –í –±–ª–æ–∫–∞—Ö "–¢–µ–Ω–¥–µ—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" –∏ "–ó–∞–∫—Ä—ã–≤–∞—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã"
   - –ö–ª–∏–∫ –ø–æ —Ñ–∞–π–ª—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É

**–§–∞–π–ª—ã –¥–æ 20 –ú–ë:**
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã –∫–Ω–æ–ø–∫–∏ "–°–∫–∞—á–∞—Ç—å" –∏ "–ó–∞–∫—Ä—ã—Ç—å"

**–§–∞–π–ª—ã –±–æ–ª—å—à–µ 20 –ú–ë:**
- ‚ö†Ô∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- üì• –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "–°–∫–∞—á–∞—Ç—å"
- üí° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ: "–§–∞–π–ª –ø—Ä–µ–≤—ã—à–∞–µ—Ç 20 –ú–ë. –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞—á–∞—Ç—å –µ–≥–æ."

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ó–∞–≥–æ–ª–æ–≤–æ–∫: –ò–º—è —Ñ–∞–π–ª–∞ + —Ä–∞–∑–º–µ—Ä       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                     ‚îÇ
‚îÇ         –û–±–ª–∞—Å—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞       ‚îÇ
‚îÇ                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [üì• –°–∫–∞—á–∞—Ç—å]      [‚ùå –ó–∞–∫—Ä—ã—Ç—å]    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- üé® –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –ø–æ—è–≤–ª–µ–Ω–∏—è
- üåë –ó–∞—Ç–µ–º–Ω–µ–Ω–Ω—ã–π —Ñ–æ–Ω (backdrop)
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å: –∑–∞–Ω–∏–º–∞–µ—Ç –¥–æ 90% —ç–∫—Ä–∞–Ω–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
- ‚ö° –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —á–µ—Ä–µ–∑ Framer Motion
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**`FilePreviewModal.tsx`**
- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Ñ–∞–π–ª–∞ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é –∏ MIME-type
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
- –û—á–∏—â–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

```typescript
// 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
const canPreview = fileSize <= MAX_PREVIEW_SIZE;

// 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
const fileType = getFileType(); // 'pdf' | 'image' | 'text' | 'office' | 'unknown'

// 3. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤)
if (fileType === 'text' && canPreview) {
  const response = await fetch(fileUrl);
  const text = await response.text();
  setFileContent(text);
}

// 4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
switch (fileType) {
  case 'pdf': return <iframe src={fileUrl} />;
  case 'image': return <img src={fileUrl} />;
  case 'text': return <pre>{fileContent}</pre>;
  case 'office': return <iframe src={googleDocsViewerUrl} />;
  default: return <DownloadButton />;
}
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**
   - –§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
   - –ö–æ–Ω—Ç–µ–Ω—Ç –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏

2. **Signed URLs**
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ URL (–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã 1 —á–∞—Å)
   - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º —Ñ–∞–π–ª–∞–º

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞**
   - –†–∞–∑–º–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É –±—Ä–∞—É–∑–µ—Ä–∞

4. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**
   - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
   - –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∑–∞–Ω–∏–º–∞–µ—Ç 90% —ç–∫—Ä–∞–Ω–∞

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```typescript
import { FilePreviewModal } from '@/components/FilePreviewModal';

// –°–æ—Å—Ç–æ—è–Ω–∏–µ
const [previewFile, setPreviewFile] = useState<File | null>(null);
const [previewUrl, setPreviewUrl] = useState<string>('');

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è
const handlePreview = async (file: File) => {
  const { data } = await supabase.storage
    .from('files')
    .createSignedUrl(file.file_path, 3600);

  if (data?.signedUrl) {
    setPreviewFile(file);
    setPreviewUrl(data.signedUrl);
  }
};

// –†–µ–Ω–¥–µ—Ä
<FilePreviewModal
  isOpen={!!previewFile}
  onClose={() => {
    setPreviewFile(null);
    setPreviewUrl('');
  }}
  fileUrl={previewUrl}
  fileName={previewFile.original_name}
  fileSize={previewFile.file_size || 0}
  mimeType={previewFile.mime_type || ''}
/>
```

### –ö–Ω–æ–ø–∫–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞

```typescript
<Button
  variant="ghost"
  size="sm"
  onClick={() => handlePreview(file)}
  title="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"
>
  <Eye className="h-4 w-4 text-purple-600" />
</Button>
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **Signed URLs**: –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
3. **–û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
4. **CORS**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–æ–≤

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏–¥–µ–æ —Ñ–∞–π–ª–æ–≤ (.mp4, .webm)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤ (.mp3, .wav)
- [ ] –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∞—Ä—Ö–∏–≤–æ–≤ (.zip, .rar) - —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
- [ ] –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –ó—É–º –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ PDF
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏ (—Å–ª–µ–¥—É—é—â–∏–π/–ø—Ä–µ–¥—ã–¥—É—â–∏–π)
- [ ] –ü–µ—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–∑ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è
